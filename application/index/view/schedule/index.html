<!-- Data Tables -->
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins" style="background: white;padding: 10px">
                <!-- 表单标题概要 -->
                <div class="ibox-title">
                    <h5>排班系统</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="col-lg-12">
                    <form class="form-horizontal search-form">

                        <table class="table">
                            <thead>
                                <tr>
                                    <th data-width="33" align="center">栏位选择</th>
                                    <th data-width="33" align="center">关系运算子</th>
                                    <th data-width="33" align="center">值</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="field1" class="form-control">
                                                <option value=""></option>
                                                <option value="factory_code">厂商编号</option>
                                                <option value="distribution_date">配送日期</option>
                                                <option value="site_code">配送点编号</option>
                                                <option value="site_name">配送点简称</option>
                                                <option value="zipcode_area">区域码</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="condition1" class="form-control">
                                                <option value=""></option>
                                                <option value="<"><</option>
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <input name="value1" type="text" class="form-control">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" align="center">
                                        <div class="col-sm-12">
                                            <label class="radio-inline">
                                                <input type="radio" name="relation1" id="inlineRadio1" value="and"> AND
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" name="relation1" id="inlineRadio2" value="or"> OR
                                            </label>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="field2" class="form-control">
                                                <option value=""></option>
                                                <option value="factory_code">厂商编号</option>
                                                <option value="distribution_date">配送日期</option>
                                                <option value="site_code">配送点编号</option>
                                                <option value="site_name">配送点简称</option>
                                                <option value="zipcode_area">区域码</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="condition2" class="form-control">
                                                <option value=""></option>
                                                <option value="<"><</option>
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <input name="value2" type="text" class="form-control">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" align="center">
                                        <div class="col-sm-12">
                                            <label class="radio-inline">
                                                <input type="radio" name="relation2" id="inlineRadio1" value="and"> AND
                                            </label>
                                            <label class="radio-inline">
                                                <input type="radio" name="relation2" id="inlineRadio2" value="or"> OR
                                            </label>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="field3" class="form-control">
                                                <option value=""></option>
                                                <option value="factory_code">厂商编号</option>
                                                <option value="distribution_date">配送日期</option>
                                                <option value="site_code">配送点编号</option>
                                                <option value="site_name">配送点简称</option>
                                                <option value="zipcode_area">区域码</option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <select name="condition3" class="form-control">
                                                <option value=""></option>
                                                <option value="<"><</option>
                                                <option value="=">=</option>
                                                <option value=">">></option>
                                            </select>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-sm-12">
                                            <input name="value3" type="text" class="form-control">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" align="center">
                                        <div class="col-sm-12">
                                            <button class="btn btn-primary schedule-search" type="submit">搜索</button>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </form>
                </div>
                <!-- 表单内容 -->
                <div class="ibox-content">

                     <!--用户控件（操作）-->
                    <div id="toolbar" class="toolbar" data-module="/index/schedule">
                        <div class="btn-group">
                            <button type="button" data-name="add" class="btn btn-primary" data-event-type="view" data-event-value="" onclick="location.href = '{:url('index/schedule/edit')}'"><i class="fa fa-plus" aria-hidden="true" style="margin-right: 2px"> </i>添加</button>
                            <button type="button" data-name="delete" class="btn btn-default" data-event-type="default" data-event-value=""><i class="fa fa-trash" aria-hidden="true" style="margin-right: 2px"> </i>删除</button>
                        </div>

                    </div>


                    <!-- 表格数据 -->
                    <table id="table" data-toggle="gridview" class="table" data-url="{:url('index/schedule/getList')}" data-toolbar="#toolbar" data-show-columns="true" data-page-size="10" data-page-list="[10, 25, 50, All]" data-unique-id="id" data-pagination="true" data-side-pagination="client" data-search="true" data-click-to-select="false">
                        <thead>
                        <tr>
                            <th data-width="10" data-align="center" data-checkbox="true"></th>
                            <th data-width="40" data-field="site_code">配送點代碼</th>
                            <th data-width="80" data-field="site_name">配送點資料</th>
                            <th data-width="40" data-field="address">配送地址</th>
                            <th data-width="40" data-field="factory_code">廠商代碼</th>
                            <th data-width="40" data-field="deliveryman">配送人員</th>
                            <th data-width="40" data-field="car_number">車號</th>
                            <th data-width="40" data-field="factory_code">廠商代碼</th>
                            <th data-width="40" data-field="factory_name">廠商資料</th>
                            <th data-width="40" data-field="operate" data-formatter="operateFormatter" data-events="operateEvents">操作</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function operateFormatter(value, row, index) {
        return [
            '<a class="btn btn-xs edit" href="javascript:void(0)" title="编辑">',
            '<i class="fa fa-edit"></i>',
            '</a>  ',
            '<a class="btn btn-xs delete" href="javascript:void(0)" title="删除">',
            '<i class="fa fa-trash"></i>',
            '</a>'
        ].join('');
    }

    var operateEvents = {
        'click .edit': function (e, value, row, index) {
            var param = {
                url: '{:url("index/schedule/edit");}',
                data: {id: row.id}
            };
            window.location.href = param.url + '?id=' + param.data.id;
        },
        'click .delete': function (e, value, row, index) {
            $("#table").gridView('deleteModal', 'delete', row)

        }
    };

    
    $(function () {
        var field1 = "{$Request.param.field1}";
        var condition1 = "{$Request.param.condition1}";
        var value1 = "{$Request.param.value1}";
        var relation1 = "{$Request.param.relation1}";
        var field2 = "{$Request.param.field2}";
        var condition2 = "{$Request.param.condition2}";
        var value2 = "{$Request.param.value2}";
        var relation2 = "{$Request.param.relation2}";
        var field3 = "{$Request.param.field3}";
        var condition3 = "{$Request.param.condition3}";
        var value3 = "{$Request.param.value3}";
        var relation3 = "{$Request.param.relation3}";

        var url = "{:url('index/schedule/getList', ['field1' => 'field1_param', 'condition1' => 'condition1_param', 'value1' => 'value1_param', 'relation1' => 'relation1_param','field2' => 'field2_param', 'condition2' => 'condition2_param', 'value1' => 'value1_param', 'relation2' => 'relation2_param', 'field3' => 'field3_param', 'value1' => 'value1_param', 'condition3' => 'condition3_param'])}"
            .replace('field1_param', field1).replace('condition1_param', condition1).replace('value1_param', value1).replace('relation1_param', relation1)
            .replace('field2_param', field1).replace('condition2_param', condition1).replace('value2_param', value2).replace('relation2_param', relation1)
            .replace('field3_param', field1).replace('condition3_param', condition1).replace('value2_param', value3);
        $("#table").attr('data-url', url);
    })

</script>
